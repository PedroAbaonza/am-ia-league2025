<section class="points-system">
  <div class="container">
    <div class="header-section" *ngIf="config">
      <h2 class="section-title">{{ config.pointsSystem.title }}</h2>
      <p class="section-subtitle">{{ config.pointsSystem.subtitle }}</p>
    </div>

    <div class="points-grid">
      <!-- Misiones por Ruta -->
      <div class="points-column">
        <div class="column-header">
          <div class="column-icon missions-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <h3 class="column-title">Misiones por Ruta</h3>
        </div>
        <p class="column-subtitle">
          Actividades que los equipos deben completar para sumar puntos
        </p>

        <div class="missions-list">
          <div class="mission-card" *ngFor="let mission of missions">
            <div class="mission-icon" [class]="'icon-' + mission.type">
              <!-- AI Flight Tips Icon -->
              <svg
                *ngIf="mission.type === 'ai-flight-tips'"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 640 512"
                fill="currentColor"
              >
                <path
                  d="M381 114.9L186.1 41.8c-16.7-6.2-35.2-5.3-51.1 2.7L89.1 67.4C78 73 77.2 88.5 87.6 95.2l146.9 94.5L136 240 77.8 214.1c-8.7-3.9-18.8-3.7-27.3 .6L18.3 230.8c-9.3 4.7-11.8 16.8-5 24.7l73.1 85.3c6.1 7.1 15 11.2 24.3 11.2H248.4c5 0 9.9-1.2 14.3-3.4L535.6 212.2c46.5-23.3 82.5-63.3 100.8-112C645.9 75 627.2 48 600.2 48H542.8c-20.2 0-40.2 4.8-58.2 14L381 114.9z"
                />
              </svg>

              <!-- Code Increment Icon -->
              <svg
                *ngIf="mission.type === 'code-increment'"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M14.447 3.026a.75.75 0 0 1 .527.921l-4.5 16.5a.75.75 0 0 1-1.448-.394l4.5-16.5a.75.75 0 0 1 .921-.527ZM16.72 6.22a.75.75 0 0 1 1.06 0l5.25 5.25a.75.75 0 0 1 0 1.06l-5.25 5.25a.75.75 0 1 1-1.06-1.06L21.44 12l-4.72-4.72a.75.75 0 0 1 0-1.06Zm-9.44 0a.75.75 0 0 1 0 1.06L2.56 12l4.72 4.72a.75.75 0 1 1-1.06 1.06L.97 12.53a.75.75 0 0 1 0-1.06l5.25-5.25a.75.75 0 0 1 1.06 0Z"
                  clip-rule="evenodd"
                />
              </svg>

              <!-- Amazon Q Icon -->
              <svg
                *ngIf="mission.type === 'amazon-q'"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M4.848 2.771A49.144 49.144 0 0 1 12 2.25c2.43 0 4.817.178 7.152.52 1.978.292 3.348 2.024 3.348 3.97v6.02c0 1.946-1.37 3.678-3.348 3.97a48.901 48.901 0 0 1-3.476.383.39.39 0 0 0-.297.17l-2.755 4.133a.75.75 0 0 1-1.248 0l-2.755-4.133a.39.39 0 0 0-.297-.17 48.9 48.9 0 0 1-3.476-.384c-1.978-.29-3.348-2.024-3.348-3.97V6.741c0-1.946 1.37-3.68 3.348-3.97Z"
                  clip-rule="evenodd"
                />
              </svg>

              <!-- JIRA Icon -->
              <svg
                *ngIf="mission.type === 'jira'"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M4.125 3C3.089 3 2.25 3.84 2.25 4.875V18a3 3 0 0 0 3 3h15a3 3 0 0 1-3-3V4.875C17.25 3.839 16.41 3 15.375 3H4.125ZM12 9.75a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5H12Zm-.75-2.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75ZM6 12.75a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5H6Zm-.75 3.75a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75ZM6 6.75a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h3a.75.75 0 0 0 .75-.75v-3A.75.75 0 0 0 9 6.75H6Z"
                  clip-rule="evenodd"
                />
              </svg>

              <!-- Default/Fallback Icon -->
              <svg
                *ngIf="
                  ![
                    'ai-flight-tips',
                    'code-increment',
                    'amazon-q',
                    'jira'
                  ].includes(mission.type)
                "
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="mission-info">
              <h4 class="mission-name">
                {{ mission.name }}
              </h4>
            </div>
            <div class="mission-points">
              <span class="points-badge">+{{ mission.points }} pts</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Retos Especiales -->
      <div class="points-column">
        <div class="column-header">
          <div class="column-icon challenges-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <h3 class="column-title">Retos Especiales</h3>
        </div>
        <p class="column-subtitle">
          Acciones de alto impacto para ganar puntos extra y acelerar el
          progreso
        </p>

        <div class="challenges-list">
          <div
            class="challenge-card"
            *ngFor="let challenge of specialChallenges"
            [class.highlighted]="challenge.highlighted"
          >
            <div class="challenge-content">
              <div class="challenge-bullet">●</div>
              <div class="challenge-info">
                <h4 class="challenge-name">{{ challenge.name }}</h4>
              </div>
              <div class="challenge-points">
                <span
                  class="points-badge"
                  [class.bonus]="challenge.bonusPoints > 200"
                  >+{{ challenge.bonusPoints }} pts</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ejemplo de Squad -->
    <div class="squad-example" *ngIf="config">
      <div class="squad-header">
        <div class="squad-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path
              d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z"
            />
          </svg>
        </div>
        <div class="squad-info">
          <h3 class="squad-title">
            {{ config.pointsSystem.squadExample.title }}
          </h3>
          <p class="squad-subtitle">
            {{ config.pointsSystem.squadExample.subtitle }}
          </p>
        </div>
      </div>
    </div>

    <!-- Ejemplo de Cálculo -->
    <div class="calculation-example" *ngIf="config">
      <div class="calc-header">
        <h3 class="calc-title">Ejemplo de Squad</h3>
        <div class="calc-members">
          {{ config.pointsSystem.squadExample.members }} miembros
        </div>
      </div>
      <div class="calc-content">
        <p class="calc-description">
          {{ config.pointsSystem.squadExample.calculation.description }}
        </p>
        <div class="calc-formula">
          <span class="calc-points"
            >{{ config.pointsSystem.squadExample.calculation.points }} pts</span
          >
          <span class="calc-multiply"
            >×
            {{ config.pointsSystem.squadExample.calculation.multiplier }}
            participantes</span
          >
          <span class="calc-equals">=</span>
          <span class="calc-total"
            >{{ config.pointsSystem.squadExample.calculation.total }} puntos
            para el squad</span
          >
        </div>
      </div>
    </div>
  </div>
</section>
