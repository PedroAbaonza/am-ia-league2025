<section class="important-dates">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Fechas Importantes</h2>
      <p class="section-subtitle">
        Mantente al d√≠a con todos los entrenamientos, demos y sesiones de
        seguimiento
      </p>
    </div>

    <!-- Filtros superiores -->
    <div class="event-filters">
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'all'"
        (click)="filterEvents('all')"
      >
        Todos
      </button>
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'aws-training'"
        (click)="filterEvents('aws-training')"
      >
        IA Flight Tips
      </button>
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'demo'"
        (click)="filterEvents('demo')"
      >
        IA Demo Show
      </button>
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'working-hours'"
        (click)="filterEvents('working-hours')"
      >
        Hangar de preguntas
      </button>
    </div>

    <!-- Routes Table -->
    <div class="routes-table">
      <div
        class="route-row"
        *ngFor="let routeData of routesWithEvents"
        [class]="'route-status-' + routeData.status"
      >
        <!-- Route Info Column -->
        <div class="route-info">
          <div class="route-header">
            <h3 class="route-name">{{ routeData.route.name }}</h3>
            <div class="route-dates">
              <span class="date-range">
                {{ formatDateShort(routeData.route.startDate) }} -
                {{ formatDateShort(routeData.route.endDate) }}
              </span>
            </div>
          </div>
          <p class="route-description">{{ routeData.route.description }}</p>
        </div>

        <!-- Events Column -->
        <div class="route-events">
          <div
            class="event-card-mini"
            *ngFor="let event of routeData.events"
            [class]="'event-status-' + getEventStatus(event.date)"
            [class.event-highlighted]="isEventHighlighted(event)"
            [class.event-dimmed]="!isEventHighlighted(event)"
          >
            <div class="event-badge-container">
              <div class="event-type-badge-mini" [class]="'type-' + event.type">
                <span class="type-text">{{
                  getEventTypeText(event.type)
                }}</span>
              </div>
            </div>

            <div class="event-details-container">
              <h4 class="event-title-mini">{{ event.title }}</h4>
              <div class="event-date-mini">
                <span class="date-text">{{ formatDateShort(event.date) }}</span>
              </div>
            </div>
          </div>

          <!-- Empty state if no events -->
          <div class="no-events" *ngIf="routeData.events.length === 0">
            <span class="no-events-text">Sin eventos programados</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
