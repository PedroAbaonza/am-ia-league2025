<section class="routes-timeline">
  <div class="container">
    <h2 class="section-title gradient-text">Rutas de la Liga</h2>

    <div class="timeline">
      <div class="timeline-line">
        <div class="timeline-line-lights-right"></div>
      </div>

      <div
        class="timeline-item"
        *ngFor="
          let routeWithEvents of routesWithEvents;
          let i = index;
          let last = last
        "
        [class.left]="i % 2 === 0"
        [class.right]="i % 2 === 1"
        [class.final-destination]="last"
      >
        <div
          class="timeline-content"
          [style.border-color]="routeWithEvents.route.color"
          [class]="'status-' + routeWithEvents.status"
          [class.game-day-final]="
            routeWithEvents.route.name.includes('Game Day Final')
          "
        >
          <div class="timeline-marker">
            <svg class="airplane-icon" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"
              />
            </svg>
          </div>

          <!-- Torre de Control para Game Day Final -->
          <div
            class="control-tower"
            *ngIf="routeWithEvents.route.name.includes('Game Day Final')"
          >
            <div class="tower-structure">
              <div class="tower-base"></div>
              <div class="tower-middle"></div>
              <div class="tower-cabin">
                <div class="cabin-windows"></div>
                <div class="cabin-antenna"></div>
              </div>
              <div class="tower-beacon"></div>
            </div>
          </div>

          <div class="route-card">
            <div class="route-header">
              <h3 class="route-name">{{ routeWithEvents.route.name }}</h3>
              <span
                class="route-status"
                [class]="'status-' + routeWithEvents.status"
              >
                {{ getStatusText(routeWithEvents.status) }}
              </span>
            </div>

            <p class="route-description">
              {{ routeWithEvents.route.description }}
            </p>

            <div class="route-dates font-mono">
              <span class="date-range">
                {{ formatDate(routeWithEvents.route.startDate) }} -
                {{ formatDate(routeWithEvents.route.endDate) }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
