<div class="individual-page">
  <div class="page-header">
    <div class="hero-logo-section">
      <img
        src="assets/images/logos/ai-starforce-squadron.png"
        alt="AI Starforce Squadron"
        class="hero-logo"
      />
    </div>
  </div>

  <!-- Podio Top 3 -->
  <div class="podium-section">
    <div class="podium">
      <!-- Segundo Lugar -->
      <div class="podium-place second" *ngIf="topIndividuals[1]">
        <div class="shield-card silver-shield">
          <div class="shield-background">
            <div class="shield-header">
              <div class="squad-role-container">
                <div class="squad-name">
                  {{ getShortSquadName(topIndividuals[1].squadName) }}
                </div>
                <div class="role-badge">
                  {{ getShortRole(topIndividuals[1].position) }}
                </div>
              </div>
            </div>
            <div class="developer-photo">
              <div
                class="developer-avatar"
                [style.background]="getSquadColor(topIndividuals[1].squadId)"
              >
                {{ topIndividuals[1].avatar }}
              </div>
            </div>
            <div class="developer-name-banner">
              <h3 class="developer-name">{{ topIndividuals[1].name }}</h3>
            </div>
            <div class="points-section">
              <div class="points-value">
                {{ formatPoints(topIndividuals[1].totalPoints) }}
              </div>
              <div class="points-label">IA CODE LINES</div>
            </div>
          </div>
        </div>
        <div class="podium-base second-base"></div>
      </div>

      <!-- Primer Lugar -->
      <div class="podium-place first" *ngIf="topIndividuals[0]">
        <div class="shield-card gold-shield winner">
          <div class="shield-background">
            <div class="shield-header">
              <div class="squad-role-container">
                <div class="squad-name">
                  {{ getShortSquadName(topIndividuals[0].squadName) }}
                </div>
                <div class="role-badge">
                  {{ getShortRole(topIndividuals[0].position) }}
                </div>
              </div>
            </div>
            <div class="developer-photo">
              <div
                class="developer-avatar"
                [style.background]="getSquadColor(topIndividuals[0].squadId)"
              >
                {{ topIndividuals[0].avatar }}
              </div>
            </div>
            <div class="developer-name-banner">
              <h3 class="developer-name">{{ topIndividuals[0].name }}</h3>
            </div>
            <div class="points-section">
              <div class="points-value">
                {{ formatPoints(topIndividuals[0].totalPoints) }}
              </div>
              <div class="points-label">IA CODE LINES</div>
            </div>
          </div>
        </div>
        <div class="podium-base first-base"></div>
      </div>

      <!-- Tercer Lugar -->
      <div class="podium-place third" *ngIf="topIndividuals[2]">
        <div class="shield-card bronze-shield">
          <div class="shield-background">
            <div class="shield-header">
              <div class="squad-role-container">
                <div class="squad-name">
                  {{ getShortSquadName(topIndividuals[2].squadName) }}
                </div>
                <div class="role-badge">
                  {{ getShortRole(topIndividuals[2].position) }}
                </div>
              </div>
            </div>
            <div class="developer-photo">
              <div
                class="developer-avatar"
                [style.background]="getSquadColor(topIndividuals[2].squadId)"
              >
                {{ topIndividuals[2].avatar }}
              </div>
            </div>
            <div class="developer-name-banner">
              <h3 class="developer-name">{{ topIndividuals[2].name }}</h3>
            </div>
            <div class="points-section">
              <div class="points-value">
                {{ formatPoints(topIndividuals[2].totalPoints) }}
              </div>
              <div class="points-label">IA CODE LINES</div>
            </div>
          </div>
        </div>
        <div class="podium-base third-base"></div>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filters-section">
    <div class="filter-buttons">
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'all'"
        (click)="filterByLevel('all')"
      >
        Todos
      </button>
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'Expert'"
        (click)="filterByLevel('Expert')"
      >
        Expert
      </button>
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'Advanced'"
        (click)="filterByLevel('Advanced')"
      >
        Advanced
      </button>
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'Intermediate'"
        (click)="filterByLevel('Intermediate')"
      >
        Intermediate
      </button>
      <button
        class="filter-btn"
        [class.active]="selectedFilter === 'Beginner'"
        (click)="filterByLevel('Beginner')"
      >
        Beginner
      </button>
    </div>
  </div>

  <!-- Lista Compacta de Desarrolladores -->
  <div class="developers-list">
    <div class="list-header">
      <div class="header-position">#</div>
      <div class="header-developer">Desarrollador</div>
      <div class="header-squad">Squad</div>
      <div class="header-level">Nivel</div>
      <div class="header-stats">Puntos</div>
      <div class="header-stats">Misiones</div>
      <div class="header-stats">Retos</div>
      <div class="header-progress">Progreso</div>
    </div>

    <div
      class="developer-row"
      *ngFor="let dev of filteredIndividuals; let i = index"
      [class]="'position-' + getOriginalPosition(dev)"
    >
      <div class="row-position">
        <div
          class="position-number"
          [style.background]="getPositionColor(getOriginalPosition(dev))"
        >
          {{ getOriginalPosition(dev) }}
        </div>
      </div>

      <div class="row-developer">
        <div
          class="developer-avatar compact"
          [style.background]="getSquadColor(dev.squadId)"
        >
          {{ dev.avatar }}
        </div>
        <div class="developer-info">
          <div class="developer-name">{{ dev.name }}</div>
          <div class="developer-position">{{ dev.position }}</div>
        </div>
      </div>

      <div class="row-squad">
        <span
          class="squad-badge compact"
          [style.background]="getSquadColor(dev.squadId)"
        >
          {{ dev.squadName }}
        </span>
      </div>

      <div class="row-level">
        <div
          class="level-badge compact"
          [class]="'level-' + dev.level.toLowerCase()"
        >
          {{ dev.level }}
        </div>
      </div>

      <div class="row-stat">
        <div class="stat-value font-mono">{{ dev.totalPoints }}</div>
      </div>

      <div class="row-stat">
        <div class="stat-value font-mono">{{ dev.completedMissions }}</div>
      </div>

      <div class="row-stat">
        <div class="stat-value font-mono">{{ dev.specialChallenges }}</div>
      </div>

      <div class="row-progress">
        <div class="progress-bar compact">
          <div
            class="progress-fill"
            [style.width]="getProgressPercentage(dev.totalPoints) + '%'"
            [style.background]="getSquadColor(dev.squadId)"
          ></div>
        </div>
        <div class="progress-text">
          {{ getProgressPercentage(dev.totalPoints) }}%
        </div>
      </div>

      <!-- Versión móvil con stats agrupadas -->
      <div class="mobile-stats" style="display: none">
        <div class="mobile-stat">
          <div class="stat-value font-mono">{{ dev.totalPoints }}</div>
          <div class="stat-label">Puntos</div>
        </div>
        <div class="mobile-stat">
          <div class="stat-value font-mono">{{ dev.completedMissions }}</div>
          <div class="stat-label">Misiones</div>
        </div>
        <div class="mobile-stat">
          <div class="stat-value font-mono">{{ dev.specialChallenges }}</div>
          <div class="stat-label">Retos</div>
        </div>
      </div>
    </div>
  </div>
</div>
